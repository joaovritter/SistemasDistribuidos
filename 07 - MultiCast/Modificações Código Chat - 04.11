Aqui est√°, formatado como um bloco de c√≥digo Markdown (√∫til para colar em f√≥runs ou Gists):

Markdown

## üöÄ Melhorias no Sistema de Chat: Da Conversa P√∫blica para a Privada

O c√≥digo original do chat multicast foi significativamente aprimorado para evoluir de um simples "sal√£o" de conversa p√∫blica para um sistema de comunica√ß√£o robusto, capaz de gerenciar **mensagens privadas (Unicast)** e **p√∫blicas (Multicast)** de forma inteligente.

As principais modifica√ß√µes introduziram um **protocolo de presen√ßa P2P (Peer-to-Peer)**, permitindo que cada cliente tenha consci√™ncia de quem est√° online e possa direcionar mensagens a eles.

Aqui est√£o os pilares centrais da atualiza√ß√£o:

### 1. Implementa√ß√£o de Mensagens Privadas (Unicast)

O objetivo principal foi permitir que um usu√°rio enviasse uma mensagem para **apenas uma pessoa** do grupo, em vez de para todas.

* A l√≥gica de envio (no m√©todo `enviarMsg`) agora √© "inteligente":
    * **Se nenhum usu√°rio estiver selecionado** na lista, a mensagem √© enviada para o **IP do Grupo** (comportamento Multicast, p√∫blico).
    * **Se um usu√°rio for selecionado**, a mensagem √© enviada diretamente para o **IP individual** daquele usu√°rio (comportamento Unicast, privado).

### 2. Cria√ß√£o de um Protocolo de Presen√ßa (Descoberta P2P)

Para que as mensagens privadas fossem poss√≠veis, os clientes precisavam de uma forma de se "descobrirem". Criamos um protocolo simples sobre o UDP:

* **`JOIN:Nick`**: Quando um usu√°rio se conecta, ele envia uma mensagem **Multicast** para o grupo, anunciando sua chegada.
* **`PRESENT:Nick`**: Os usu√°rios que j√° est√£o no chat (e recebem o `JOIN`) respondem com uma mensagem **Unicast** (diretamente para o IP de quem acabou de entrar), dizendo "Estou aqui!".
* **`LEAVE:Nick`**: Quando um usu√°rio clica em "Sair", ele envia uma mensagem **Multicast** para o grupo, avisando que est√° saindo.

### 3. Mapeamento de Usu√°rios (Nick para IP)

A "m√°gica" que conecta tudo √© uma nova estrutura de dados:

* `HashMap<String, InetAddress> mapaUsuarios;`

Esta √© a "lista de contatos" do chat. Quando uma mensagem `JOIN` ou `PRESENT` √© recebida, o programa extrai o **Nick** do remetente (da mensagem) e o **IP** do remetente (do `DatagramPacket`) e os armazena no mapa.

Isso permite que, ao selecionar um "Nick" na lista, o programa saiba exatamente para qual "IP" enviar a mensagem privada.

### 4. L√≥gica de Recebimento e GUI Din√¢mica

* A `ThreadReceptora` foi a pe√ßa mais modificada. Ela deixou de ser um simples receptor de texto e se tornou um **processador de protocolo**. Ela agora inspeciona cada pacote, identifica se √© `JOIN`, `LEAVE`, `PRESENT` ou um chat normal, e toma as a√ß√µes necess√°rias.
* A `JList` de usu√°rios (`jList1`) agora √© controlada por um `DefaultListModel`, permitindo que usu√°
